# Gacha System - 快速決策建議

**給忙碌的你**: 如果沒時間逐項確認，這裡是我基於業界標準和公主連結原作的建議值。你可以直接採用這些建議，或告訴我哪些需要調整。

---

## 🎯 推薦配置 (Ready to Use)

### 核心參數

| 項目         | 建議值             | 理由           |
| ------------ | ------------------ | -------------- |
| **單抽成本** | 150 寶石           | 公主連結標準   |
| **十連成本** | 1500 寶石 (無折扣) | 避免單抽被淘汰 |
| **十連保底** | 至少 1 個 2星      | 平衡體驗       |
| **天井上限** | 200 Pt             | 公主連結標準   |
| **天井/抽**  | 1 Pt/次            | 標準配置       |

### 重複轉換

| 星級 | 女神石 |
| ---- | ------ |
| 1星  | 10     |
| 2星  | 50     |
| 3星  | 150    |

**比例**: 1:5:15，符合稀有度差距

### 天井過期處理

- **方案**: 轉換為女神石
- **比例**: 10 Pt = 1 女神石
- **範例**: 抽了 150 次後卡池結束 → 獲得 15 女神石

### Dry Run 行為

- **方案**: 模擬抽卡 + 明確提示
- **訊息範例**:

  ```
  ⚠️ 預覽模式 (未扣款)

  🎉 獲得:
  ★★★ 新年黑貓
  ★★ 茜里
  ★ 佩可莉姆 (重複 +10 女神石)
  ...

  💡 今日真實抽卡次數已用完
  明日 00:00 重置
  ```

### 初始資源

- **初始寶石**: 3000 (足夠十連 2 次)
- **初始女神石**: 0
- **初始瑪那**: 100000

### 卡池實作範圍

- ✅ 常駐池 (所有角色，標準機率)
- ✅ PickUp 池 (特定角色 0.7% up)
- ⏸️ Fes 池 (第二階段)

### 女神石用途

- ✅ 重複補償
- ⏸️ 其他用途 (升星/商店) 第二階段

---

## 📋 對應的 Schema 設定

基於以上建議，系統會這樣配置:

### 預設卡池配置

```json
{
  "id": 1,
  "name": "常駐招募",
  "type": "PERMANENT",
  "config": {
    "cost": 150,
    "ceil": 200,
    "exchangeItems": [],
    "conversionRate": {
      "1": 10,
      "2": 50,
      "3": 150
    },
    "pointExpiry": {
      "enabled": true,
      "conversionRate": 10
    }
  }
}
```

### 用戶初始錢包

```typescript
await prisma.userWallet.create({
  data: {
    userId: "U1234567890",
    jewel: 3000,
    stone: 0,
    mana: 100000n,
  },
});
```

### 每日限制預設

```typescript
await prisma.gachaDailyLimit.create({
  data: {
    userId: "U1234567890",
    lastDrawAt: new Date(0), // 1970-01-01, 確保首次可抽
    drawCount: 0,
    maxDraws: 1,
  },
});
```

---

## ✅ 如何使用此建議

### 選項 1: 直接採用 (推薦)

如果你同意以上所有建議，只需回覆:

```
同意使用推薦配置
```

我會立即:

1. 更新最終規格文件
2. 產生完整 Prisma Schema
3. 產生 Migration Script
4. 產生 Seed Script (包含測試資料)

### 選項 2: 部分調整

如果有特定項目需要調整，只需說明差異:

```
推薦配置 OK，但:
- 十連成本改為 1350 (10% off)
- 初始寶石改為 5000
```

### 選項 3: 全部自訂

如果想完全自訂，請填寫 `DECISION_CHECKLIST.md`

---

## 🎮 這些設定的遊戲體驗

基於推薦配置，玩家體驗會是:

### 首日體驗

1. 註冊 → 獲得 3000 寶石
2. 執行 `#抽 10` → 消耗 1500 寶石，獲得 10 個角色
3. 執行 `#抽` → 顯示「預覽模式」(Dry Run)
4. 隔日 00:00 → 額度重置，可再抽一次

### 天井體驗

1. 抽了 200 次 → 累積 200 Pt
2. 執行 `#天井兌換 新年黑貓` → 消耗 200 Pt，必定獲得
3. 卡池結束時尚有 50 Pt → 自動轉換為 5 女神石

### 經濟循環

- **寶石來源** (未來): 簽到、任務、活動
- **寶石消耗**: 抽卡
- **女神石來源**: 重複角色、天井轉換
- **女神石消耗** (未來): 升星、商店

---

**準備好了嗎?** 告訴我你的決定，我們開始實作！
