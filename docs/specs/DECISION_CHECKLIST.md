# Gacha System - 決策確認清單

**目的**: 在開始實作前，逐項確認所有設計決策，避免後續返工。

**使用方式**: 請在每個選項前標記 `[x]`，並填寫需要的數值。

---

## 🔴 高優先級決策 (Critical)

### 1. 重複角色轉換比例

抽到已擁有的角色時，轉換為女神石的數量:

**背景**: 公主連結原作中，重複角色會轉換為「女神秘石」用於角色碎片兌換。

```
[x] 1星角色 → __1__ 女神石
[x] 2星角色 → _10__ 女神石
[x] 3星角色 → _50__ 女神石
```

**參考數據**:

- 原神: 3星武器 15 星塵, 4星武器 2 星輝, 5星角色 10 星輝
- 公主連結 (需確認): 推測為 10/50/150

**建議值**: 10 / 50 / 150 (1:5:15 比例)

**決定**: **\*\***\_\_\_**\*\***

---

### 2. 天井點數過期處理

卡池結束時，用戶未使用的天井點數如何處理?

```
[ ] 方案 A: 歸零 (點數消失，不補償)
[x] 方案 B: 轉換為女神石 (比例: __1__ Pt = 1 女神石)
[ ] 方案 C: 轉換為其他道具 (指定道具: _______)
[ ] 方案 D: 永久保留 (累積到下一個池)
```

**影響**:

- 方案 A: 最簡單，但對玩家不友善
- 方案 B: 推薦，平衡遊戲經濟
- 方案 C: 需設計額外道具
- 方案 D: 會讓天井機制失去意義

**建議**: 方案 B，比例為 **10 Pt = 1 女神石**

**決定**: **\*\***\_\_\_**\*\***

---

### 3. 十連抽設計

**3.1 成本設計**

```
單抽成本: [ ] 150 寶石 (確認)
十連成本:
  [x] 1500 寶石 (無折扣)
  [ ] 1350 寶石 (10% off)
  [ ] 其他: _____ 寶石
```

**3.2 十連保底**

```
[ ] 無保底 (純粹 10 次獨立抽選)
[x] 保底一個 2星以上 (最後一抽強制 >= 2星)
[ ] 保底一個 3星 (最後一抽強制 3星)
```

**3.3 天井點數計算**

```
單抽獲得: [x] 1 Pt (確認)
十連獲得:
  [x] 10 Pt (無額外獎勵)
  [ ] 11 Pt (贈送 1 Pt)
  [ ] 其他: _____ Pt
```

**建議**: 無折扣 (1500) + 保底 2星 + 天井 10 Pt

**決定**:

- 成本: **\*\***\_\_\_**\*\***
- 保底: **\*\***\_\_\_**\*\***
- 天井: **\*\***\_\_\_**\*\***

---

### 4. Dry Run 提示方式

當用戶今日已使用真實抽卡次數，再次執行 `#抽` 時的行為:

```
[ ] 方案 A: 直接拒絕
    顯示: "❌ 今日抽卡次數已用完，明日 00:00 重置"

[x] 方案 B: 模擬抽卡 + 明確提示
    顯示: "⚠️ 預覽模式 (未扣款)\n[抽卡結果]\n💡 今日真實抽卡次數已用完"

[ ] 方案 C: 靜默模擬 (不提示是預覽)
    顯示: "[抽卡結果]" (與真實抽卡相同)
```

**影響**:

- 方案 A: 最誠實，但用戶無法「試手氣」
- 方案 B: 推薦，透明且有娛樂性
- 方案 C: 不推薦，可能誤導用戶

**決定**: **\*\***\_\_\_**\*\***

---

## 🟡 中優先級決策 (Important)

### 5. 物品 ID 規劃

建議的 ID 區段劃分:

```
1000~1999: 貨幣類
  1001: 寶石 (Jewel)
  1002: 女神石 (Divine Stone)
  1003: 瑪那 (Mana)

2000~4999: 角色 (Characters)
  2001~2999: 一般角色
  3000~3999: 公主形態角色
  4000~4999: 預留

5000~5999: 消耗品 (Consumables)
  5001: 體力藥水
  5002: 經驗藥水
  5003: 掃蕩券

9000~9999: 系統物品 (System Items)
  9001: 天井點數代幣 (可選，若使用獨立表則不需要)
```

**決定**:

```
[x] 同意此規劃
[ ] 有調整 (請說明): _______________
```

---

### 6. 初始寶石配置

新用戶首次註冊/使用時，是否贈送初始寶石?

```
[x] 不贈送 (寶石需透過活動/簽到/任務獲得)
[ ] 贈送 _____ 寶石 (足夠抽 _____ 次)
```

**背景**: 如果本階段不實作「寶石來源」功能 (簽到/任務)，建議至少給初始寶石供測試。

**建議**: 贈送 **3000 寶石** (足夠十連 2 次)

**決定**: **\*\***\_\_\_**\*\***

---

## 🟢 低優先級決策 (Optional)

### 7. 卡池實作範圍

第一版實作需要包含哪些卡池?

```
[x] 僅常駐池 (Permanent Pool)
    - 包含所有已實裝角色
    - 標準機率 (3星 2.5%)

[ ] 常駐池 + PickUp 池
    - 常駐池 (標準機率)
    - PickUp 池 (特定角色機率提升至 0.7%)

[ ] 完整實作 (常駐 + PickUp + Fes)
    - 常駐池
    - PickUp 池
    - Fes 池 (3星機率翻倍至 5%)
```

**建議**: 先做 **常駐池 + PickUp 池**，Fes 池之後擴充

**決定**: **\*\***\_\_\_**\*\***

---

### 8. 女神石用途設計

目前女神石的用途:

- ✅ 重複角色補償

是否需要增加其他用途?

```
[x] 暫不需要 (僅作補償貨幣)

[ ] 需要增加用途:
    [ ] 角色升星 (3星→4星→5星)
    [ ] 商店兌換 (角色碎片、道具)
    [ ] 角色專武強化
    [ ] 其他: _______________
```

**影響**: 如果需要其他用途，需設計對應的功能模組 (升星系統/商店系統)

**建議**: 第一版先 **僅作補償**，避免範圍蔓延

**決定**: **\*\***\_\_\_**\*\***

---

## ✅ 已確認事項 (Confirmed)

以下為前次討論已確認的設計:

- [x] 採用 UserWallet 獨立表 (不使用 Item ID=999)
- [x] 採用天井制 (累積點數兌換，不採用保底制)
- [x] 角色不支援「多實例」(同角色僅一筆 InventoryItem)
- [x] 每日限制: 一天真實抽卡 1 次，其餘為 Dry Run
- [x] 天井點數上限: 200 Pt 可兌換角色
- [x] 使用 Hybrid RDBMS (PostgreSQL + JSONB)
- [x] 卡池權重使用整數 (避免浮點誤差)

---

## 📝 填寫完成後

請將填寫完成的清單回傳，我會據此:

1. 更新 `GACHA_INVENTORY_FINAL_SPEC.md`
2. 輸出最終版 Prisma Schema
3. 產生 Migration Script 範本
4. 準備開始實作

---

**填寫日期**: **\*\***\_\_\_**\*\***  
**填寫人**: **\*\***\_\_\_**\*\***
